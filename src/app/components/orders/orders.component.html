<div class="tesla-home-container">
  <!-- Header Section -->
  <div class="tesla-header">
    <div class="header-content">
      <div class="user-profile">
        <div class="profile-avatar">
          <i class="fas fa-clipboard-list"></i>
        </div>
        <div class="user-info">
          <h2 class="user-name">My Investments</h2>
          <p class="user-phone">Your active and past orders</p>
        </div>
      </div>
    </div>
  </div>

  <div class="orders-section">
    <div class="tabs-new">
      <button class="tab-btn-new" [class.active]="activeTab === 'daily'" (click)="switchTab('daily')">
        <i class="fas fa-calendar-day"></i> Daily Plans
      </button>
      <button class="tab-btn-new" [class.active]="activeTab === 'advanced'" (click)="switchTab('advanced')">
        <i class="fas fa-award"></i> Advanced Plans
      </button>
    </div>

    <app-loading-spinner [isLoading]="isLoadingSpinner"></app-loading-spinner>

    <div class="orders-list-new" *ngIf="!isLoadingSpinner && getFilteredOrders().length > 0">
      <div class="order-card-new" *ngFor="let order of getFilteredOrders()">
        <div class="order-header-new">
          <div class="order-title-new">{{order.plan_title}}</div>
          <div class="order-status-new" [ngClass]="getStatusColor(order.status)">{{order.status | titlecase}}</div>
        </div>
        <div class="order-body-new">
          <div class="order-stat-new">
            <span class="stat-label">Amount</span>
            <span class="stat-value">₹{{order.amount | number : '1.2-2'}}</span>
          </div>
          <div class="order-stat-new">
            <span class="stat-label">Daily Income</span>
            <span class="stat-value">₹{{order.daily_income | number : '1.0-0'}}</span>
          </div>
          <div class="order-stat-new">
            <span class="stat-label">Earned Today</span>
            <span class="stat-value">₹{{order.current_daily_earnings | number : '1.0-0'}}</span>
          </div>
        </div>
        <div class="progress-bar-new" *ngIf="order.status === 'active'">
          <div class="progress-fill-new" [style.width.%]="order.progress_percentage"></div>
        </div>
        <div class="progress-label-new" *ngIf="order.status === 'active'">
          {{ floor((order.duration_days || 0) * (order.progress_percentage || 0) / 100)}} / {{order.duration_days}} days
        </div>
      </div>
    </div>

    <div class="empty-state-new" *ngIf="!isLoadingSpinner && getFilteredOrders().length === 0">
      <i class="fas fa-inbox empty-icon"></i>
      <h3>No Investments Found</h3>
      <p>You have no investments in this category.</p>
      <button class="invest-btn-new" (click)="navigateToInvest()">Start Investing</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="tesla-bottom-nav">
    <div class="nav-item" (click)="navigateToHome()">
      <div class="nav-icon"><i class="fas fa-home"></i></div>
      <span class="nav-label">Home</span>
    </div>
    <div class="nav-item" (click)="navigateToInvest()">
      <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
      <span class="nav-label">Invest</span>
    </div>
    <div class="nav-center-btn" (click)="openCustomerService()">
      <div class="center-icon"><i class="fas fa-headset"></i></div>
    </div>
    <div class="nav-item" (click)="navigateToTeam()">
      <div class="nav-icon"><i class="fas fa-user-friends"></i></div>
      <span class="nav-label">Team</span>
    </div>
    <div class="nav-item active" (click)="navigateToSettings()">
      <div class="nav-icon"><i class="fas fa-cog"></i></div>
      <span class="nav-label">Settings</span>
    </div>
  </div>
</div>
